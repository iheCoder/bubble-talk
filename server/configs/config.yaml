# BubbleTalk Server Configuration

server:
  host: "0.0.0.0"
  port: 8080
  read_timeout: 30s
  write_timeout: 30s

# OpenAI Realtime API配置
openai:
  api_key: "fake_key"  # 可以从环境变量读取，或直接填写
  realtime_url: "wss://api.openai.com/v1/realtime?model=gpt-4o-realtime-preview-2024-12-17"
  model: "gpt-4o-realtime-preview-2024-12-17"
  voice: "alloy"  # alloy, echo, fable, onyx, nova, shimmer
  temperature: 0.8
  max_response_output_tokens: 4096

# Gateway配置
gateway:
  default_instructions: |
    You are a Socratic tutor in a learning conversation.
    Guide users to discover answers through questioning.
    Keep responses under 20 seconds when spoken aloud.
  input_audio_format: "pcm16"
  output_audio_format: "pcm16"
  ping_interval: 30s

# Director Engine配置
director:
  available_roles:
    - host
    - economist
    - skeptic
  available_beats:
    - reveal
    - check
    - deepen
    - twist
    - continue
    - lens_shift
    - feynman
    - montage
    - minigame
    - exit_ticket
  default_talk_burst_limit: 20  # 秒
  high_load_talk_burst_limit: 15  # 秒
  output_clock_threshold: 90  # 秒，超过此值强制选择输出型Beat

# Actor Engine配置
actor:
  prompts_dir: "configs/prompts"
  max_prompt_length: 2000  # 字符

# Session配置
session:
  default_timeout: 30m
  max_inactive_time: 10m
  max_sessions_per_user: 5

# Learning Model配置
learning:
  initial_mastery: 0.3
  mastery_update_rate: 0.1
  misconception_decay_rate: 0.05
  transfer_weight: 0.3

# 日志配置
logging:
  level: "info"  # debug, info, warn, error
  format: "json"  # json, text
  output: "stdout"

# 路径配置
paths:
  prompts: "configs/prompts"
  concepts: "configs/concepts_econ.json"
  bubbles: "configs/bubbles.json"

